<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10 Pilihan Vertikal Modern dengan Background Malam dan Meteor Merah</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            min-height: 100vh;
            padding: 20px;
            color: white;
            position: relative;
            overflow-y: auto;
            background: #0a0a1a;
        }

        #background-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            transition: opacity 1s ease;
        }

        #background-canvas.clickable {
            pointer-events: auto;
            cursor: pointer;
            z-index: 10; /* Pastikan canvas berada di atas elemen lain saat dapat diklik */
        }

        .container {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.7);
            position: relative;
            z-index: 1;
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .container.show {
            display: block;
            opacity: 1;
        }

        .container.hidden {
            pointer-events: none; /* Pastikan konten tidak mengganggu klik pada canvas */
        }

        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.5s ease forwards;
            opacity: 0;
            position: relative;
            cursor: pointer;
        }

        .card:hover {
            transform: translateX(10px) scale(1.05);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.7);
        }

        .card-icon {
            font-size: 2rem;
            color: #ff6b6b;
        }

        .card-content {
            flex: 1;
        }

        .card h2 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .card p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .card:nth-child(1) { animation-delay: 0.1s; }
        .card:nth-child(2) { animation-delay: 0.2s; }
        .card:nth-child(3) { animation-delay: 0.3s; }

        .show-button, .hide-button, .expert-button, .explore-language-button, .toggle-time-button, .hide-buttons-button {
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.5);
            animation: pulse 1.5s infinite;
        }

        .show-button {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
            z-index: 2;
        }

        .show-button:hover {
            background: linear-gradient(45deg, #ff8e53, #ff6b6b);
            box-shadow: 0 0 30px rgba(255, 107, 107, 0.8);
            transform: translateX(-50%) scale(1.05);
        }

        .expert-button {
            position: fixed;
            right: 40px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(90deg, #ff5e62, #f09819);
            z-index: 2;
        }

        .expert-button:hover {
            transform: translateY(-50%) scale(1.1);
        }

        .hide-button {
            display: none;
            margin: 20px auto 0;
            background: linear-gradient(45deg, #ff4444, #ff6666);
            max-width: 200px;
            z-index: 1;
        }

        .hide-button.show {
            display: block;
        }

        .hide-button:hover {
            background: linear-gradient(45deg, #ff6666, #ff4444);
            box-shadow: 0 0 25px rgba(255, 68, 68, 0.8);
            transform: scale(1.05);
        }

        .explore-language-button {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(90deg, #ff5e62, #f09819);
            z-index: 2;
        }

        .explore-language-button:hover {
            transform: translateX(-50%) scale(1.1);
        }

        .toggle-time-button {
            position: fixed;
            bottom: 20px;
            right: 40px;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            z-index: 2;
        }

        .toggle-time-button:hover {
            transform: scale(1.1);
        }

        .hide-buttons-button {
            position: fixed;
            bottom: 80px;
            right: 40px;
            background: linear-gradient(90deg, #ff758c, #ff7eb3);
            z-index: 2;
        }

        .hide-buttons-button:hover {
            transform: scale(1.1);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 15px rgba(255, 107, 107, 0.5); }
            50% { box-shadow: 0 0 30px rgba(255, 107, 107, 0.8); }
            100% { box-shadow: 0 0 15px rgba(255, 107, 107, 0.5); }
        }

        @media (max-width: 768px) {
            .container { padding: 10px; }
            .card { flex-direction: column; text-align: center; }
            .card-icon { margin-bottom: 10px; }
            .show-button, .hide-button { padding: 10px 20px; font-size: 1rem; }
            .expert-button, .explore-language-button, .toggle-time-button, .hide-buttons-button { right: 20px; padding: 8px 16px; font-size: 14px; }
        }

        @media (max-width: 480px) {
            .card h2 { font-size: 1.2rem; }
            .card p { font-size: 0.8rem; }
            .show-button, .hide-button { padding: 8px 15px; font-size: 0.9rem; }
        }
    </style>
</head>
<body>
    <canvas id="background-canvas"></canvas>

    <button class="show-button" id="show-button">Explore Task</button>
    <button class="expert-button" id="expert-button">Expert Question</button>
    <div class="container" id="content-container"></div>
    <button class="hide-button" id="hide-button">Hide Content</button>
    <button class="explore-language-button" id="explore-language-button">Explore Language</button>
    <button class="hide-buttons-button" id="hide-buttons-button">Hide Buttons</button>
    <button class="toggle-time-button" id="toggle-time-button">Toggle Time Transition</button>

    <script>
        // Data untuk kartu dinamis
        const cardData = [
            { icon: "📁", title: "praktek pemrograman terstruktur", desc: "semester 2", url: "https://ekz121.github.io/pemrograman-terstruktur/" },
            { icon: "📂", title: "praktek pemrograman web dasar", desc: "semester 2", url: "https://ekz121.github.io/pemrograman-web-dasar/" },
            { icon: "📂", title: "prosedur sebelum memulai", desc: "semester 2", url: "https://ekz121.github.io/halaman-sebelum-memulai/" }
        ];

        // Membuat kartu secara dinamis
        const contentContainer = document.getElementById('content-container');
        cardData.forEach(data => {
            const card = document.createElement('div');
            card.classList.add('card');
            card.setAttribute('data-url', data.url);
            card.innerHTML = `
                <div class="card-icon">${data.icon}</div>
                <div class="card-content">
                    <h2>${data.title}</h2>
                    <p>${data.desc}</p>
                </div>
            `;
            contentContainer.appendChild(card);
        });

        // Fungsi untuk menampilkan/menyembunyikan konten
        function toggleContainers() {
            const container = contentContainer;
            const showButton = document.getElementById('show-button');
            const hideButton = document.getElementById('hide-button');
            if (container.classList.contains('show')) {
                container.classList.remove('show');
                hideButton.classList.remove('show');
                showButton.style.display = 'block';
            } else {
                container.classList.add('show');
                hideButton.classList.add('show');
                showButton.style.display = 'none';
            }
        }

        // Fungsi efek flare (tanpa audio)
        function triggerFlareEffect(targetUrl) {
            const canvas = document.getElementById('background-canvas');
            canvas.style.opacity = '0';
            setTimeout(() => {
                window.location.href = targetUrl;
            }, 1000);
        }

        // Variabel untuk melacak apakah tombol sedang disembunyikan
        let buttonsHidden = false;

        // Fungsi untuk menyembunyikan semua tombol dan konten
        function hideAllButtons() {
            buttonsHidden = true;
            document.getElementById('show-button').style.display = 'none';
            document.getElementById('expert-button').style.display = 'none';
            document.getElementById('hide-button').style.display = 'none';
            document.getElementById('explore-language-button').style.display = 'none';
            document.getElementById('toggle-time-button').style.display = 'none';
            document.getElementById('hide-buttons-button').style.display = 'none';
            const container = document.getElementById('content-container');
            if (container.classList.contains('show')) {
                container.classList.remove('show');
            }
            // Nonaktifkan interaksi pada konten agar tidak mengganggu klik canvas
            container.classList.add('hidden');
            // Pastikan canvas dapat diklik
            const canvas = document.getElementById('background-canvas');
            canvas.classList.add('clickable');
        }

        // Fungsi untuk menampilkan semua tombol
        function showAllButtons() {
            buttonsHidden = false;
            document.getElementById('show-button').style.display = 'block';
            document.getElementById('expert-button').style.display = 'block';
            document.getElementById('hide-button').style.display = 'none'; // Awalnya hide-button disembunyikan
            document.getElementById('explore-language-button').style.display = 'block';
            document.getElementById('toggle-time-button').style.display = 'block';
            document.getElementById('hide-buttons-button').style.display = 'block';
            // Aktifkan kembali interaksi pada konten
            const container = document.getElementById('content-container');
            container.classList.remove('hidden');
            // Reset canvas ke keadaan tidak dapat diklik
            const canvas = document.getElementById('background-canvas');
            canvas.classList.remove('clickable');
            // Pastikan tombol yang sesuai dengan keadaan konten ditampilkan
            const hideButton = document.getElementById('hide-button');
            const showButton = document.getElementById('show-button');
            if (container.classList.contains('show')) {
                hideButton.style.display = 'block';
                showButton.style.display = 'none';
            } else {
                showButton.style.display = 'block';
                hideButton.style.display = 'none';
            }
        }

        // Event listener untuk tombol yang sudah ada
        document.getElementById('show-button').addEventListener('click', toggleContainers);
        document.getElementById('hide-button').addEventListener('click', toggleContainers);
        document.getElementById('expert-button').addEventListener('click', () => triggerFlareEffect('https://ekz121.github.io/comming-soon/'));
        document.getElementById('explore-language-button').addEventListener('click', () => triggerFlareEffect('https://ekz121.github.io/comming-soon/'));
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('click', () => triggerFlareEffect(card.getAttribute('data-url')));
        });

        // Event listener untuk menyembunyikan tombol
        document.getElementById('hide-buttons-button').addEventListener('click', hideAllButtons);

        // Event listener untuk klik canvas agar tombol muncul kembali
        const canvas = document.getElementById('background-canvas');
        canvas.addEventListener('click', (event) => {
            if (buttonsHidden) {
                event.stopPropagation(); // Mencegah event menyebar ke elemen lain
                showAllButtons();
            }
        });

        // WebGL Background
        const gl = canvas.getContext('webgl2');
        if (!gl) {
            console.error('WebGL2 tidak didukung di browser ini.');
            document.body.style.background = '#0a0a1a'; // Fallback background
        }
        let frm;

        const vertexSrc = `#version 300 es
            precision highp float;
            in vec4 position;
            void main() { gl_Position = position; }`;

        // Shader fragmen asli (tanpa transisi hari-malam)
        const fragmtSrcOriginal = `#version 300 es
            precision highp float;
            out vec4 O;
            uniform vec2 resolution;
            uniform float time;
            #define FC gl_FragCoord.xy
            #define T time
            #define R resolution
            #define MN min(R.x,R.y)
            float rnd(vec2 p) {
                p=fract(p*vec2(12.9898,78.233));
                p+=dot(p,p+34.56);
                return fract(p.x*p.y);
            }
            float noise(in vec2 p) {
                vec2 i=floor(p), f=fract(p), u=f*f*(3.-2.*f);
                float a=rnd(i), b=rnd(i+vec2(1,0)), c=rnd(i+vec2(0,1)), d=rnd(i+1.);
                return mix(mix(a,b,u.x),mix(c,d,u.x),u.y);
            }
            float fbm(vec2 p) {
                float t=.0, a=1.; 
                mat2 m=mat2(1.,-.5,.2,1.2);
                for (int i=0; i<5; i++) {
                    t+=a*noise(p);
                    p*=2.*m;
                    a*=.5;
                }
                return t;
            }
            float clouds(vec2 p) {
                float d=1., t=.0;
                for (float i=.0; i<3.; i++) {
                    float a=d*fbm(i*10.+p.x*.2+.2*(1.+i)*p.y+d+i*i+p);
                    t=mix(t,d,a);
                    d=a;
                    p*=2./(i+1.);
                }
                return t;
            }
            void main(void) {
                vec2 uv=(FC-.5*R)/MN, st=uv*vec2(2,1);
                vec3 col=vec3(0);
                float bg=clouds(vec2(st.x+T*.5,-st.y));
                vec3 cloudColor = vec3(bg*0.1, bg*0.05, bg*0.15);
                uv*=1.-.3*(sin(T*.2)*.5+.5);
                for (float i=1.; i<12.; i++) {
                    uv+=.1*cos(i*vec2(.1+.01*i, .8)+i*i+T*.5+.1*uv.x);
                    vec2 p=uv;
                    float d=length(p);
                    vec3 meteorColor = vec3(1.0, 0.1, 0.1);
                    col+=0.0025/d*(cos(sin(i)*meteorColor)+0.5);
                    float b=noise(i+p+bg*1.731);
                    col+=0.004*b/length(max(p,vec2(b*p.x*.02,p.y)));
                    col=mix(col, cloudColor, d*0.8);
                }
                O=vec4(col,1);
            }`;

        // Shader fragmen baru (dengan transisi hari-malam 7 detik)
        const fragmtSrcWithTransition = `#version 300 es
            precision highp float;
            out vec4 O;
            uniform vec2 resolution;
            uniform float time;
            #define FC gl_FragCoord.xy
            #define T time
            #define R resolution
            #define MN min(R.x,R.y)

            float rnd(vec2 p) {
                p = fract(p * vec2(12.9898, 78.233));
                p += dot(p, p + 34.56);
                return fract(p.x * p.y);
            }

            float noise(in vec2 p) {
                vec2 i = floor(p), f = fract(p), u = f * f * (3. - 2. * f);
                float a = rnd(i), b = rnd(i + vec2(1, 0)), c = rnd(i + vec2(0, 1)), d = rnd(i + 1.);
                return mix(mix(a, b, u.x), mix(c, d, u.x), u.y);
            }

            float fbm(vec2 p) {
                float t = .0, a = 1.; 
                mat2 m = mat2(1., -.5, .2, 1.2);
                for (int i = 0; i < 5; i++) {
                    t += a * noise(p);
                    p *= 2. * m;
                    a *= .5;
                }
                return t;
            }

            float clouds(vec2 p) {
                float d = 1., t = .0;
                for (float i = .0; i < 3.; i++) {
                    float a = d * fbm(i * 10. + p.x * .2 + .2 * (1. + i) * p.y + d + i * i + p);
                    t = mix(t, d, a);
                    d = a;
                    p *= 2. / (i + 1.);
                }
                return t;
            }

            void main(void) {
                vec2 uv = (FC - .5 * R) / MN, st = uv * vec2(2, 1);
                vec3 col = vec3(0);

                // Siklus hari-malam setiap 7 detik
                float dayCycle = sin(T * 3.14159265 / 7.0);
                float dayFactor = (dayCycle + 1.0) * 0.5;

                float bg = clouds(vec2(st.x + T * .5, -st.y));

                vec3 nightColor = vec3(bg * 0.05, bg * 0.03, bg * 0.1);
                vec3 morningColor = vec3(bg * 0.3, bg * 0.25, bg * 0.2);
                vec3 cloudColor = mix(nightColor, morningColor, dayFactor);

                float brightness = mix(0.3, 0.7, dayFactor);

                uv *= 1. - .3 * (sin(T * .2) * .5 + .5);

                for (float i = 1.; i < 12.; i++) {
                    uv += .1 * cos(i * vec2(.1 + .01 * i, .8) + i * i + T * .5 + .1 * uv.x);
                    vec2 p = uv;
                    float d = length(p);
                    vec3 meteorColor = vec3(1.0, 0.1, 0.1);
                    col += 0.0025 / d * (cos(sin(i) * meteorColor) + 0.5);
                    float b = noise(i + p + bg * 1.731);
                    col += 0.004 * b / length(max(p, vec2(b * p.x * .02, p.y)));
                    col = mix(col, cloudColor, d * 0.8);
                }

                col *= brightness;

                O = vec4(col, 1);
            }`;

        const vertices = [-1, 1, -1, -1, 1, 1, 1, -1];
        let program, vs, fs, buffer;
        let useTransition = false; // Status untuk melacak shader yang digunakan

        function resize() {
            const { innerWidth: width, innerHeight: height } = window;
            canvas.width = width;
            canvas.height = height;
            gl.viewport(0, 0, width, height);
        }

        function compile(shader, source) {
            gl.shaderSource(shader, source);
            gl.compileShader(shader);
            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) console.error(gl.getShaderInfoLog(shader));
        }

        function setupShader(fragSource) {
            // Bersihkan program sebelumnya jika ada
            if (program) {
                gl.deleteProgram(program);
            }
            if (fs) {
                gl.deleteShader(fs);
            }

            // Buat dan kompilasi shader
            vs = gl.createShader(gl.VERTEX_SHADER);
            fs = gl.createShader(gl.FRAGMENT_SHADER);
            compile(vs, vertexSrc);
            compile(fs, fragSource);

            // Buat dan tautkan program
            program = gl.createProgram();
            gl.attachShader(program, vs);
            gl.attachShader(program, fs);
            gl.linkProgram(program);
            if (!gl.getProgramParameter(program, gl.LINK_STATUS)) console.error(gl.getProgramInfoLog(program));

            // Atur buffer dan atribut
            buffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
            const position = gl.getAttribLocation(program, "position");
            gl.enableVertexAttribArray(position);
            gl.vertexAttribPointer(position, 2, gl.FLOAT, false, 0, 0);

            // Atur uniform
            program.resolution = gl.getUniformLocation(program, "resolution");
            program.time = gl.getUniformLocation(program, "time");
        }

        function render(now) {
            gl.clearColor(0, 0, 0, 1);
            gl.clear(gl.COLOR_BUFFER_BIT);
            gl.useProgram(program);
            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
            gl.uniform2f(program.resolution, canvas.width, canvas.height);
            gl.uniform1f(program.time, now * 1e-3);
            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
            frm = requestAnimationFrame(render);
        }

        function init() {
            resize();
            setupShader(fragmtSrcOriginal); // Mulai dengan shader asli
            canvas.style.opacity = '1';
            render(0);
            window.onresize = resize;
        }

        // Ganti antara shader
        document.getElementById('toggle-time-button').addEventListener('click', () => {
            useTransition = !useTransition;
            const newShader = useTransition ? fragmtSrcWithTransition : fragmtSrcOriginal;
            setupShader(newShader);
            // Perbarui teks tombol untuk menunjukkan status
            document.getElementById('toggle-time-button').textContent = useTransition ? "Disable Time Transition" : "Enable Time Transition";
        });

        init();

        // Event untuk menangani saat halaman ditampilkan kembali (misalnya tombol "Back")
        window.addEventListener('pageshow', (event) => {
            if (event.persisted) {
                canvas.style.opacity = '1';
                if (!frm) {
                    render(0);
                }
            }
        });

        // Hentikan animasi saat meninggalkan halaman
        window.addEventListener('pagehide', () => {
            if (frm) {
                cancelAnimationFrame(frm);
                frm = null;
            }
        });
    </script>
</body>
</html>
